!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.customLocationPersistencePlugin=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var NOTEBOOK_URL="/build/",plugin=({proxy:{url:"/proxy"},envVariables:{yodaLink:"https://api.stage.yaas.io/hybris/yoda/v1",oauthService:"https://api.stage.yaas.io/hybris/oauth2/v1",accountService:"https://api.stage.yaas.io/hybris/account/v1/",marketplaceService:"https://api.stage.yaas.io/hybris/marketplace/v3",clientId:"4lfyAwV3zeskWEIzoIMxohRMVYd0YFXI",url:"http://127.0.0.1:3000/auth.html",loginCssUrl:"https://devportal.stage.yaas.io/styles/auth-iframe.css"},customLocation:{path:"./apinotebooks",devportalUrl:"http://localhost:9778/apinotebooks/",mode:"external"}}||{}).customLocation||{},PATH=plugin.path,DEVPORTALURL=window.location.origin+"/apinotebooks/",MODE=plugin.mode,prepareAjaxData=function(data){var ajaxData={url:"",method:"",data:""};return"external"===MODE?(ajaxData.url=DEVPORTALURL+data.id+".md",ajaxData.method="GET",ajaxData.body=""):(ajaxData.url=NOTEBOOK_URL+"/list/get",ajaxData.method="POST",ajaxData.data=JSON.stringify({id:data.id,path:PATH,devportalUrl:DEVPORTALURL,mode:MODE})),ajaxData},parseResponseData=function(responseData,id){return"local"===MODE?JSON.parse(responseData):{id:id,content:responseData}},loadPlugin=function(data,next,done){if(!data.id)return next();var ajaxData=prepareAjaxData(data);App.middleware.trigger("ajax",{url:ajaxData.url,data:ajaxData.data,proxy:!1,method:ajaxData.method},function(err,xhr){var file;try{file=parseResponseData(xhr.responseText,data.id)}catch(e){return next(e)}return isNotebookContent(file)?(data.id=file.id,data.ownerId="Devportal",data.ownerTitle="Devportal User",data.content=file.content,data.updatedAt=new Date,done()):next(new Error("Unexpected notebook response"))})},isNotebookContent=function(content){return!0},listPlugin=function(list,next,done){App.middleware.trigger("ajax",{url:NOTEBOOK_URL+"/list",proxy:!1,data:JSON.stringify({path:PATH}),method:"POST"},function(err,xhr){if(err)return done(err);var response;try{response=JSON.parse(xhr.responseText)}catch(e){return next(e)}return"object"!=typeof response?next(new Error("Unexpected response")):(App._.each(response,function(obj){obj.id&&list.push({id:obj.id,updatedAt:new Date,meta:{title:obj.meta.title}})}),done())})},savePlugin=function(data,next,done){App.middleware.trigger("ajax",{url:NOTEBOOK_URL+"/list/save",proxy:!1,method:"POST",data:JSON.stringify({fileName:data.meta.id,content:data.content,path:PATH})},function(err,xhr){if(err)return next(err);if(200!==xhr.status&&201!==xhr.status)return next(new Error("Request failed"));try{var content=JSON.parse(xhr.responseText);data.id=content.id}catch(e){return next(e)}return done()})},removePlugin=function(data,next,done){return App.middleware.trigger("ajax",{url:NOTEBOOK_URL+"/list/delete",proxy:!1,data:JSON.stringify({id:data.id,path:PATH}),method:"POST"},done)};module.exports={"customPersistence:load":loadPlugin,"customPersistence:list":listPlugin,"customPersistence:save":savePlugin,"customPersistence:remove":removePlugin}},{}]},{},[1])(1)});